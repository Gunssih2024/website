<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
#bar-chart {
    position: relative;
    width: 100%;
    overflow-x: auto;
    overflow-y: hidden;
}

.chart-container {
    min-width: 500px; /* Adjust this width based on your data */
    height: 100%;
    display: inline-block;
    /* overflow-y: hidden; */
}

canvas {
    width: 100%;
    height: 100%;
}
</style>

<script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.js" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js" defer></script>

<style>
@import url(https://cdnjs.cloudflare.com/ajax/libs/MaterialDesign-Webfont/5.3.45/css/materialdesignicons.min.css);
@import url(https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.css);
</style>

</head>
<body>

      
    <!-- Main Container -->
<div class="flex min-h-screen bg-gray-900 text-white">
    <!-- Sidebar -->
    <aside class="w-64 bg-gray-800 p-6">
        <div class="flex items-center mb-10">
            <img src="logo.png" alt="Logo" class="w-10 h-10 mr-3">
            <span class="text-2xl font-semibold">Sonic Sentry</span>
        </div>
        <nav class="space-y-4">
            <a href="#" class="flex items-center p-3 bg-gray-700 rounded-lg">
                <span class="material-icons mr-3">home</span> Home
            </a>
            <a href="#" class="flex items-center p-3 hover:bg-gray-700 rounded-lg">
                <span class="material-icons mr-3">Add New</span> Add New
            </a>

            <a href="#" class="flex items-center p-3 hover:bg-gray-700 rounded-lg">
                <span class="material-icons mr-3">settings</span> Settings
            </a>
        </nav>
        <button class="mt-10 w-full p-3 text-left hover:bg-gray-700 rounded-lg">
            Logout
        </button>
    </aside>

    <!-- Main Dashboard Content -->
    <div class="flex-1 p-6 bg-gray-900">
        <!-- Top Navigation -->
        <div class="flex items-center justify-between mb-6">
            <h1 class="text-3xl font-bold">Dashboard</h1>
            <div class="flex items-center space-x-4">
                <input type="text" placeholder="Search" class="p-2 bg-gray-800 rounded-lg outline-none">
                <button class="bg-blue-600 p-2 rounded-lg">Deposit</button>
                <button class="bg-blue-600 p-2 rounded-lg">Withdraw</button>
            </div>
        </div>

        <!-- Main Content -->
        <div class="grid grid-cols-3 gap-6">
            <!-- Graph Section -->
            <div class="col-span-2 bg-gray-800 p-6 rounded-lg">
                <h2 class="text-xl font-bold mb-4">Total Shots: <span class="text-green-400">14</span></h2>
                <div class="h-64 bg-gray-700 rounded-lg">
                    <div class="bg-gray-900 flex items-center justify-center px-5 py-5">
                        <div class="bg-gray-800 text-gray-500 rounded shadow-xl py-5 px-5 w-full lg:w-full" x-data="{chartData:chartData()}" x-init="chartData.fetch()">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-lg font-semibold leading-tight">Income</h3>
                                <div class="relative" @click.away="chartData.showDropdown=false">
                                    <button class="text-xs hover:text-gray-300 flex items-center" @click="chartData.showDropdown=!chartData.showDropdown">
                                        <span x-text="chartData.options[chartData.selectedOption].label"></span>
                                        <i class="ml-1 mdi mdi-chevron-down"></i>
                                    </button>
                                    <div class="bg-gray-700 shadow-lg rounded text-sm absolute top-full right-0 min-w-full w-32 z-30 mt-1 -mr-3" x-show="chartData.showDropdown" x-transition:enter="transition ease duration-300 transform" x-transition:enter-start="opacity-0 translate-y-2" x-transition:enter-end="opacity-100 translate-y-0" x-transition:leave="transition ease duration-300 transform" x-transition:leave-start="opacity-100 translate-y-0" x-transition:leave-end="opacity-0 translate-y-4">
                                        <span class="absolute top-0 right-0 w-3 h-3 bg-gray-700 transform rotate-45 -mt-1 mr-3"></span>
                                        <div class="bg-gray-700 rounded w-full relative z-10 py-1">
                                            <ul class="list-reset text-xs">
                                                <template x-for="(item, index) in chartData.options">
                                                    <li class="px-4 py-2 hover:bg-gray-600 hover:text-white transition-colors duration-100 cursor-pointer" :class="{'text-white': index === chartData.selectedOption}" @click="chartData.selectOption(index); chartData.showDropdown=false">
                                                        <span x-text="item.label"></span>
                                                    </li>
                                                </template>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
            
                            <div class="w-full h-full">
                                <canvas id="chart" class="w-full h-full"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            
            
            <!-- Earnings and Stats -->
            <div class="bg-gray-800 p-6 rounded-lg">
                <h2 class="text-xl font-bold mb-4">FPGA Overview: <span class="text-green-400">$42,665</span></h2>
                <div id="bar-chart" class="h-64 bg-gray-700 rounded-lg overflow-x-auto">
                    <div class="chart-container">
                        <canvas id="myChart"></canvas>
                    </div>
                </div>
            </div>
            
            
        </div>

        <!-- Portfolio and Transactions -->
        <div class="grid grid-cols-3 gap-6 mt-6">
            <!-- Portfolio Table -->
            <div class="col-span-2 bg-gray-800 p-6 rounded-lg">
                <h2 class="text-xl font-bold mb-4">New Gun Shots</h2>
                <table class="min-w-full bg-gray-700 rounded-lg">
                    <thead>
                        <tr class="bg-gray-700">
                            <th class="p-3 text-left">FPGA</th>
                            <th class="p-3 text-left">Elevation</th>
                            <th class="p-3 text-left">Direction</th>
                            <th class="p-3 text-left">Time</th>
                            <!-- <th class="p-3 text-left">% of Deposit</th> -->
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="border-b border-gray-600">
                            <td class="p-3">FPGA 1</td>
                            <td class="p-3">200m</td>
                            <td class="p-3">NW</td>
                            <td class="p-3 text-green-400">2.32 PM</td>
                            <!-- <td class="p-3">35%</td> -->
                        </tr>
                        <!-- More rows can be added similarly -->
                    </tbody>
                </table>
            </div>

            <!-- Recent Transactions -->
            <div class="bg-gray-800 p-6 rounded-lg">
                <h2 class="text-xl font-bold mb-4">Recent Transactions</h2>
                <ul class="space-y-3">
                    <li class="flex justify-between">
                        <span>Bitcoin - Buy</span>
                        <span>$22,997.03</span>
                    </li>
                    <!-- More list items can be added similarly -->
                </ul>
            </div>
        </div>
    </div>
</div>


  <script>
    var ctx = document.getElementById('myChart').getContext('2d');
    var myChart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
        datasets: [{
          label: '# of Votes',
          data: [12, 19, 3, 5, 2, 3],
          backgroundColor: [
            'rgba(255, 99, 132, 0.2)',
            'rgba(54, 162, 235, 0.2)',
            'rgba(255, 206, 86, 0.2)',
            'rgba(75, 192, 192, 0.2)',
            'rgba(153, 102, 255, 0.2)',
            'rgba(255, 159, 64, 0.2)'
          ],
          borderColor: [
            'rgba(255, 99, 132, 1)',
            'rgba(54, 162, 235, 1)',
            'rgba(255, 206, 86, 1)',
            'rgba(75, 192, 192, 1)',
            'rgba(153, 102, 255, 1)',
            'rgba(255, 159, 64, 1)'
          ],
          borderWidth: 1
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false, // Allow the chart to resize to the container
        scales: {
          y: {
            beginAtZero: true
          }
        }
      }
    });

  </script>

<script>

    Number.prototype.comma_formatter = function() {
        return this.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ",");
    }
    
    let chartData = function(){
        return {
            date: 'today',
            options: [
                {
                    label: 'Today',
                    value: 'today',
                },
                {
                    label: 'Last 7 Days',
                    value: '7days',
                },
                {
                    label: 'Last 30 Days',
                    value: '30days',
                },
                {
                    label: 'Last 6 Months',
                    value: '6months',
                },
                {
                    label: 'This Year',
                    value: 'year',
                },
            ],
            showDropdown: false,
            selectedOption: 0,
            selectOption: function(index){
                this.selectedOption = index;
                this.date = this.options[index].value;
                this.renderChart();
            },
            data: null,
            fetch: function(){
                fetch('https://cdn.jsdelivr.net/gh/swindon/fake-api@master/tailwindAlpineJsChartJsEx1.json')
                    .then(res => res.json())
                    .then(res => {
                        this.data = res.dates;
                        this.renderChart();
                    })
            },
            renderChart: function(){
                let c = false;
    
                Chart.helpers.each(Chart.instances, function(instance) {
                    if (instance.chart.canvas.id == 'chart') {
                        c = instance;
                    }
                });
    
                if(c) {
                    c.destroy();
                }
    
                let ctx = document.getElementById('chart').getContext('2d');
    
                let chart = new Chart(ctx, {
                    type: "line",
                    data: {
                        labels: this.data[this.date].data.labels,
                        datasets: [
                            {
                                label: "Income",
                                backgroundColor: "rgba(102, 126, 234, 0.25)",
                                borderColor: "rgba(102, 126, 234, 1)",
                                pointBackgroundColor: "rgba(102, 126, 234, 1)",
                                data: this.data[this.date].data.income,
                            },
                            {
                                label: "Expenses",
                                backgroundColor: "rgba(237, 100, 166, 0.25)",
                                borderColor: "rgba(237, 100, 166, 1)",
                                pointBackgroundColor: "rgba(237, 100, 166, 1)",
                                data: this.data[this.date].data.expenses,
                            },
                        ],
                    },
                    layout: {
                        padding: {
                            right: 10
                        }
                    },
                    options: {
                        responsive: true,
        maintainAspectRatio: false, // Allow the chart to resize to the container

                        scales: {
                            
                            yAxes: [{
                                
                                gridLines: {
                                    display: false
                                },
                                ticks: {
                                    callback: function(value,index,array) {
                                        return value > 1000 ? ((value < 1000000) ? value/1000 + 'K' : value/1000000 + 'M') : value;
                                    }
                                }
                            }]
                        }
                    }
                });
            }
        }
    }
    </script>
    
  
</body>
</html>